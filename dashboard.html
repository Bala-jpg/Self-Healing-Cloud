<!DOCTYPE html>
<html>
<head>
    <title>Self-Healing Cloud Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b0e14; color: white; text-align: center; }
        .card { background: #1c2128; border: 1px solid #30363d; border-radius: 8px; padding: 20px; width: 400px; margin: 20px auto; text-align: left; border-left: 5px solid #238636; }
        .badge { background: #238636; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üõ°Ô∏è RCA Agent Dashboard</h1>
    <div id="logs">Listening for incidents...</div>

    <script>
        const firebaseConfig = { /* PASTE YOUR CONFIG HERE */ };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        db.collection("incidents").orderBy("timestamp", "desc").onSnapshot((querySnapshot) => {
            const container = document.getElementById("logs");
            container.innerHTML = "";
            querySnapshot.forEach((doc) => {
                const data = doc.data();
                container.innerHTML += `
                    <div class="card">
                        <span class="badge">${data.status}</span>
                        <h3>Cause: ${data.analysis.cause}</h3>
                        <p><b>Category:</b> ${data.analysis.category}</p>
                        <p><b>Action:</b> ${data.analysis.action}</p>
                        <small>${data.timestamp}</small>
                    </div>`;
            });
        });
    </script>
</body>
</html>